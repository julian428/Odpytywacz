---
import DashboardLayout from "@layouts/DashboardLayout.astro";
import axios from "axios";

export const prerender = false;
const pb_loc = import.meta.env.PB_LOCATION;
const method = Astro.request.method;
const { questionId } = Astro.params;

let data = {
  id: null as string | null,
  question: "",
  answears: "",
  decoys: "",
  show: "" as
    | "2:1"
    | "2:2"
    | "3:1"
    | "3:2"
    | "3:3"
    | "4:1"
    | "4:2"
    | "4:3"
    | "4:4"
    | "",
  title: "",
  type: "open" as "open" | "closed",
};

if (method === "POST") {
  try {
    const body = await Astro.request.formData();
    console.log(body);
  } catch (error) {
    console.log(error);
  }
} else if (method === "GET") {
  try {
    const res = await axios.get(
      `${pb_loc}/api/collections/question/records/${questionId}?fields=id,question,answears,decoys,show,title,type`
    );
    data = res.data;
  } catch (error) {
    console.log(error);
  }
}
---

<DashboardLayout>question</DashboardLayout>
